import{_ as U,a as Q,b as R,c as W}from"../chunks/C5uINEos.js";import{I as X,u as Y,S as Z,i as ee,s as te,n as N,d as g,b as $,c as y,o as u,e as b,f as D,j as I,g as L,h as x,p as se,t as P,k as C,H as ne,J as le,K as ae}from"../chunks/D0BTlVWg.js";import"../chunks/IHki7fMi.js";function T(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function ie(a,t){a.d(1),t.delete(a.key)}function ce(a,t,l,e,n,c,s,i,o,d,_,M){let m=a.length,j=c.length,f=m;const E={};for(;f--;)E[a[f].key]=f;const S=[],A=new Map,H=new Map,w=[];for(f=j;f--;){const r=M(n,c,f),v=l(r);let p=s.get(v);p?w.push(()=>p.p(r,t)):(p=d(v,r),p.c()),A.set(v,S[f]=p),v in E&&H.set(v,Math.abs(f-E[v]))}const O=new Set,k=new Set;function h(r){Y(r,1),r.m(i,_),s.set(r.key,r),_=r.first,j--}for(;m&&j;){const r=S[j-1],v=a[m-1],p=r.key,V=v.key;r===v?(_=r.first,m--,j--):A.has(V)?!s.has(p)||O.has(p)?h(r):k.has(V)?m--:H.get(p)>H.get(V)?(k.add(p),h(r)):(O.add(V),m--):(o(v,s),m--)}for(;m--;){const r=a[m];A.has(r.key)||o(r,s)}for(;j;)h(S[j-1]);return X(w),S}const re=!0,oe=!1,de=a=>String(a||"").trim().toLowerCase().replace(/[–—−]/g,"-"),B=a=>{const t=de(a).match(/^(\d{4})(?:\s*-\s*(\d{4}|ongoing))?$/i);if(!t)return{start:-1/0,end:-1/0,ongoing:!1};const l=+t[1],e=!!(t[2]&&String(t[2]).includes("ongoing")),n=/^\d{4}$/.test(t[2])?+t[2]:e?1/0:l;return{start:l,end:n,ongoing:e}},ue=a=>{const t=a.toLowerCase().indexOf("<hr"),l=t>=0?a.slice(0,t):a,e=[...l.matchAll(/<img[^>]*src=["']([^"']+)["'][^>]*>/gi)].map(c=>c[1]);return{summaryHtml:l.replace(/<img[^>]*>/gi,""),media:e}};async function fe(){return{projects:Object.entries(Object.assign({"/src/routes/texts/cua.md":W,"/src/routes/texts/design-signals.md":R,"/src/routes/texts/unfolding-the-archive.md":Q,"/src/routes/texts/vantage.md":U})).map(([e,n])=>{var d,_,M;const c=typeof((d=n==null?void 0:n.default)==null?void 0:d.render)=="function"?n.default.render():{html:""},{summaryHtml:s,media:i}=ue(c.html||"");return{slug:e.split("/texts/")[1].replace(".md",""),title:((_=n==null?void 0:n.metadata)==null?void 0:_.title)||"",date:((M=n==null?void 0:n.metadata)==null?void 0:M.date)||"",summaryHtml:s,media:i}}).sort((e,n)=>{const c=B(e.date),s=B(n.date);return c.ongoing&&!s.ongoing?-1:s.ongoing&&!c.ongoing?1:s.start!==c.start?s.start-c.start:s.end!==c.end?s.end-c.end:(e.title||"").localeCompare(n.title||"","en",{sensitivity:"base"})})}}const ye=Object.freeze(Object.defineProperty({__proto__:null,csr:oe,load:fe,prerender:re},Symbol.toStringTag,{value:"Module"}));function F(a,t,l){const e=a.slice();return e[3]=t[l],e}function G(a,t,l){const e=a.slice();return e[6]=t[l],e}function he(a){let t,l=T(a[3].media),e=[];for(let n=0;n<l.length;n+=1)e[n]=J(G(a,l,n));return{c(){t=I("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=b(n,"DIV",{class:!0});var c=D(t);for(let s=0;s<e.length;s+=1)e[s].l(c);c.forEach(g),this.h()},h(){u(t,"class","media svelte-gj6161")},m(n,c){$(n,t,c);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null)},p(n,c){if(c&1){l=T(n[3].media);let s;for(s=0;s<l.length;s+=1){const i=G(n,l,s);e[s]?e[s].p(i,c):(e[s]=J(i),e[s].c(),e[s].m(t,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=l.length}},d(n){n&&g(t),le(e,n)}}}function J(a){let t,l;return{c(){t=I("img"),this.h()},l(e){t=b(e,"IMG",{src:!0,alt:!0,loading:!0,decoding:!0,fetchpriority:!0,class:!0}),this.h()},h(){ae(t.src,l=a[6])||u(t,"src",l),u(t,"alt",""),u(t,"loading","lazy"),u(t,"decoding","async"),u(t,"fetchpriority","low"),u(t,"class","svelte-gj6161")},m(e,n){$(e,t,n)},p:N,d(e){e&&g(t)}}}function K(a,t){var O;let l,e,n,c=t[1](t[3].date)+"",s,i,o,d,_=t[3].title+"",M,m,j,f,E,S,A=t[3].summaryHtml+"",H,w=((O=t[3].media)==null?void 0:O.length)>0&&he(t);return{key:a,first:null,c(){l=I("div"),e=I("div"),n=I("time"),s=P(c),i=C(),o=I("div"),d=I("a"),M=P(_),m=C(),w&&w.c(),j=C(),f=I("div"),E=I("div"),S=new ne(!1),H=C(),this.h()},l(k){l=b(k,"DIV",{class:!0});var h=D(l);e=b(h,"DIV",{class:!0});var r=D(e);n=b(r,"TIME",{class:!0});var v=D(n);s=L(v,c),v.forEach(g),i=x(r),o=b(r,"DIV",{class:!0});var p=D(o);d=b(p,"A",{href:!0});var V=D(d);M=L(V,_),V.forEach(g),p.forEach(g),r.forEach(g),m=x(h),w&&w.l(h),j=x(h),f=b(h,"DIV",{class:!0});var q=D(f);E=b(q,"DIV",{class:!0});var z=D(E);S=se(z,!1),z.forEach(g),q.forEach(g),H=x(h),h.forEach(g),this.h()},h(){u(n,"class","col time svelte-gj6161"),u(d,"href",`/projects/${t[3].slug}`),u(o,"class","col project svelte-gj6161"),u(e,"class","row svelte-gj6161"),S.a=null,u(E,"class","content"),u(f,"class","info svelte-gj6161"),u(l,"class","svelte-gj6161"),this.first=l},m(k,h){$(k,l,h),y(l,e),y(e,n),y(n,s),y(e,i),y(e,o),y(o,d),y(d,M),y(l,m),w&&w.m(l,null),y(l,j),y(l,f),y(f,E),S.m(A,E),y(l,H)},p(k,h){var r;t=k,((r=t[3].media)==null?void 0:r.length)>0&&w.p(t,h)},d(k){k&&g(l),w&&w.d()}}}function ge(a){let t,l,e=[],n=new Map,c=T(a[0]);const s=i=>i[3].slug;for(let i=0;i<c.length;i+=1){let o=F(a,c,i),d=s(o);n.set(d,e[i]=K(d,o))}return{c(){t=I("main"),l=I("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=b(i,"MAIN",{class:!0});var o=D(t);l=b(o,"DIV",{class:!0});var d=D(l);for(let _=0;_<e.length;_+=1)e[_].l(d);d.forEach(g),o.forEach(g),this.h()},h(){u(l,"class","rows svelte-gj6161"),u(t,"class","archive svelte-gj6161")},m(i,o){$(i,t,o),y(t,l);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,null)},p(i,[o]){o&3&&(c=T(i[0]),e=ce(e,o,s,1,i,c,n,l,ie,K,null,F))},i:N,o:N,d(i){i&&g(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function _e(a,t,l){let{data:e}=t;const n=e.projects||[],c=s=>{if(!s)return"—";if(/^\d{4}(-\d{4})?$/.test(s))return s;const i=new Date(s);return isNaN(i)?s:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(i)};return a.$$set=s=>{"data"in s&&l(2,e=s.data)},[n,c,e]}class we extends Z{constructor(t){super(),ee(this,t,_e,ge,te,{data:2})}}export{we as component,ye as universal};
