import{_ as U,a as Q,b as R,c as W}from"../chunks/C5uINEos.js";import{I as X,u as Y,S as Z,i as ee,s as te,n as $,d as _,b as T,c as w,o as h,e as b,f as q,j as I,g as L,h as O,p as se,t as P,k as x,H as ne,J as le,K as ae}from"../chunks/D0BTlVWg.js";import"../chunks/IHki7fMi.js";function C(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function ie(a,t){a.d(1),t.delete(a.key)}function ce(a,t,l,e,n,c,s,i,o,d,g,S){let m=a.length,j=c.length,u=m;const E={};for(;u--;)E[a[u].key]=u;const D=[],V=new Map,M=new Map,y=[];for(u=j;u--;){const r=S(n,c,u),v=l(r);let p=s.get(v);p?y.push(()=>p.p(r,t)):(p=d(v,r),p.c()),V.set(v,D[u]=p),v in E&&M.set(v,Math.abs(u-E[v]))}const A=new Set,k=new Set;function f(r){Y(r,1),r.m(i,g),s.set(r.key,r),g=r.first,j--}for(;m&&j;){const r=D[j-1],v=a[m-1],p=r.key,H=v.key;r===v?(g=r.first,m--,j--):V.has(H)?!s.has(p)||A.has(p)?f(r):k.has(H)?m--:M.get(p)>M.get(H)?(k.add(p),f(r)):(A.add(H),m--):(o(v,s),m--)}for(;m--;){const r=a[m];V.has(r.key)||o(r,s)}for(;j;)f(D[j-1]);return X(y),D}const re=!0,oe=!1,de=a=>String(a||"").trim().toLowerCase().replace(/[–—−]/g,"-"),B=a=>{const t=de(a).match(/^(\d{4})(?:\s*-\s*(\d{4}|ongoing))?$/i);if(!t)return{start:-1/0,end:-1/0,ongoing:!1};const l=+t[1],e=!!(t[2]&&String(t[2]).includes("ongoing")),n=/^\d{4}$/.test(t[2])?+t[2]:e?1/0:l;return{start:l,end:n,ongoing:e}},he=a=>{const t=a.toLowerCase().indexOf("<hr"),l=t>=0?a.slice(0,t):a,e=[...l.matchAll(/<img[^>]*src=["']([^"']+)["'][^>]*>/gi)].map(c=>c[1]);return{summaryHtml:l.replace(/<img[^>]*>/gi,""),media:e}};async function ue(){return{projects:Object.entries(Object.assign({"/src/routes/texts/cua.md":W,"/src/routes/texts/design-signals.md":R,"/src/routes/texts/unfolding-the-archive.md":Q,"/src/routes/texts/vantage.md":U})).map(([e,n])=>{var d,g,S;const c=typeof((d=n==null?void 0:n.default)==null?void 0:d.render)=="function"?n.default.render():{html:""},{summaryHtml:s,media:i}=he(c.html||"");return{slug:e.split("/texts/")[1].replace(".md",""),title:((g=n==null?void 0:n.metadata)==null?void 0:g.title)||"",date:((S=n==null?void 0:n.metadata)==null?void 0:S.date)||"",summaryHtml:s,media:i}}).sort((e,n)=>{const c=B(e.date),s=B(n.date);return c.ongoing&&!s.ongoing?-1:s.ongoing&&!c.ongoing?1:s.start!==c.start?s.start-c.start:s.end!==c.end?s.end-c.end:(e.title||"").localeCompare(n.title||"","en",{sensitivity:"base"})})}}const we=Object.freeze(Object.defineProperty({__proto__:null,csr:oe,load:ue,prerender:re},Symbol.toStringTag,{value:"Module"}));function F(a,t,l){const e=a.slice();return e[3]=t[l],e}function G(a,t,l){const e=a.slice();return e[6]=t[l],e}function fe(a){let t,l=C(a[3].media),e=[];for(let n=0;n<l.length;n+=1)e[n]=J(G(a,l,n));return{c(){t=I("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=b(n,"DIV",{class:!0});var c=q(t);for(let s=0;s<e.length;s+=1)e[s].l(c);c.forEach(_),this.h()},h(){h(t,"class","media svelte-1qhjw1o")},m(n,c){T(n,t,c);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null)},p(n,c){if(c&1){l=C(n[3].media);let s;for(s=0;s<l.length;s+=1){const i=G(n,l,s);e[s]?e[s].p(i,c):(e[s]=J(i),e[s].c(),e[s].m(t,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=l.length}},d(n){n&&_(t),le(e,n)}}}function J(a){let t,l;return{c(){t=I("img"),this.h()},l(e){t=b(e,"IMG",{src:!0,alt:!0,loading:!0,decoding:!0,fetchpriority:!0,class:!0}),this.h()},h(){ae(t.src,l=a[6])||h(t,"src",l),h(t,"alt",""),h(t,"loading","lazy"),h(t,"decoding","async"),h(t,"fetchpriority","low"),h(t,"class","svelte-1qhjw1o")},m(e,n){T(e,t,n)},p:$,d(e){e&&_(t)}}}function K(a,t){var A;let l,e,n,c=t[1](t[3].date)+"",s,i,o,d,g=t[3].title+"",S,m,j,u,E,D,V=t[3].summaryHtml+"",M,y=((A=t[3].media)==null?void 0:A.length)>0&&fe(t);return{key:a,first:null,c(){l=I("div"),e=I("div"),n=I("time"),s=P(c),i=x(),o=I("div"),d=I("a"),S=P(g),m=x(),y&&y.c(),j=x(),u=I("div"),E=I("div"),D=new ne(!1),M=x(),this.h()},l(k){l=b(k,"DIV",{class:!0});var f=q(l);e=b(f,"DIV",{class:!0});var r=q(e);n=b(r,"TIME",{class:!0});var v=q(n);s=L(v,c),v.forEach(_),i=O(r),o=b(r,"DIV",{class:!0});var p=q(o);d=b(p,"A",{href:!0});var H=q(d);S=L(H,g),H.forEach(_),p.forEach(_),r.forEach(_),m=O(f),y&&y.l(f),j=O(f),u=b(f,"DIV",{class:!0});var N=q(u);E=b(N,"DIV",{class:!0});var z=q(E);D=se(z,!1),z.forEach(_),N.forEach(_),M=O(f),f.forEach(_),this.h()},h(){h(n,"class","col time svelte-1qhjw1o"),h(d,"href",`/projects/${t[3].slug}`),h(o,"class","col project svelte-1qhjw1o"),h(e,"class","row svelte-1qhjw1o"),D.a=null,h(E,"class","content"),h(u,"class","info svelte-1qhjw1o"),h(l,"class","svelte-1qhjw1o"),this.first=l},m(k,f){T(k,l,f),w(l,e),w(e,n),w(n,s),w(e,i),w(e,o),w(o,d),w(d,S),w(l,m),y&&y.m(l,null),w(l,j),w(l,u),w(u,E),D.m(V,E),w(l,M)},p(k,f){var r;t=k,((r=t[3].media)==null?void 0:r.length)>0&&y.p(t,f)},d(k){k&&_(l),y&&y.d()}}}function _e(a){let t,l,e=[],n=new Map,c=C(a[0]);const s=i=>i[3].slug;for(let i=0;i<c.length;i+=1){let o=F(a,c,i),d=s(o);n.set(d,e[i]=K(d,o))}return{c(){t=I("main"),l=I("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=b(i,"MAIN",{class:!0});var o=q(t);l=b(o,"DIV",{class:!0});var d=q(l);for(let g=0;g<e.length;g+=1)e[g].l(d);d.forEach(_),o.forEach(_),this.h()},h(){h(l,"class","rows svelte-1qhjw1o"),h(t,"class","archive svelte-1qhjw1o")},m(i,o){T(i,t,o),w(t,l);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,null)},p(i,[o]){o&3&&(c=C(i[0]),e=ce(e,o,s,1,i,c,n,l,ie,K,null,F))},i:$,o:$,d(i){i&&_(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function ge(a,t,l){let{data:e}=t;const n=e.projects||[],c=s=>{if(!s)return"—";if(/^\d{4}(-\d{4})?$/.test(s))return s;const i=new Date(s);return isNaN(i)?s:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(i)};return a.$$set=s=>{"data"in s&&l(2,e=s.data)},[n,c,e]}class ye extends Z{constructor(t){super(),ee(this,t,ge,_e,te,{data:2})}}export{ye as component,we as universal};
