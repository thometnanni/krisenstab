import{_ as U,a as Q,b as R,c as W}from"../chunks/1xduTUEX.js";import{I as X,u as Y,S as Z,i as ee,s as te,n as T,d as v,b as x,c as I,o as m,e as D,f as z,j as E,g as q,h as C,p as se,t as B,k as $,H as ne,J as ie,K as le}from"../chunks/D0BTlVWg.js";import"../chunks/IHki7fMi.js";function O(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ae(l,t){l.d(1),t.delete(l.key)}function re(l,t,n,e,s,c,i,r,o,a,h,g){let f=l.length,p=c.length,u=f;const j={};for(;u--;)j[l[u].key]=u;const S=[],H=new Map,M=new Map,b=[];for(u=p;u--;){const d=g(s,c,u),y=n(d);let w=i.get(y);w?b.push(()=>w.p(d,t)):(w=a(y,d),w.c()),H.set(y,S[u]=w),y in j&&M.set(y,Math.abs(u-j[y]))}const V=new Set,k=new Set;function _(d){Y(d,1),d.m(r,h),i.set(d.key,d),h=d.first,p--}for(;f&&p;){const d=S[p-1],y=l[f-1],w=d.key,A=y.key;d===y?(h=d.first,f--,p--):H.has(A)?!i.has(w)||V.has(w)?_(d):k.has(A)?f--:M.get(w)>M.get(A)?(k.add(w),_(d)):(V.add(A),f--):(o(y,i),f--)}for(;f--;){const d=l[f];H.has(d.key)||o(d,i)}for(;p;)_(S[p-1]);return X(b),S}const ce=!0,oe=!1,de=l=>String(l||"").trim().toLowerCase().replace(/[–—−]/g,"-"),P=l=>{const t=de(l).match(/^(\d{4})(?:\s*-\s*(\d{4}|ongoing))?$/i);if(!t)return{start:-1/0,end:-1/0,ongoing:!1};const n=+t[1],e=!!(t[2]&&String(t[2]).includes("ongoing")),s=/^\d{4}$/.test(t[2])?+t[2]:e?1/0:n;return{start:n,end:s,ongoing:e}},he=l=>{const t=l.toLowerCase().indexOf("<hr"),n=t>=0?l.slice(0,t):l,e=[...n.matchAll(/<img[^>]*src=["']([^"']+)["'][^>]*>/gi)].map(c=>c[1]);return{summaryHtml:n.replace(/<img[^>]*>/gi,""),media:e}};async function fe(){return{projects:Object.entries(Object.assign({"/src/routes/texts/cua.md":W,"/src/routes/texts/design-signals.md":R,"/src/routes/texts/unfolding-the-archive.md":Q,"/src/routes/texts/vantage.md":U})).map(([e,s])=>{var a,h,g;const c=typeof((a=s==null?void 0:s.default)==null?void 0:a.render)=="function"?s.default.render():{html:""},{summaryHtml:i,media:r}=he(c.html||"");return{slug:e.split("/texts/")[1].replace(".md",""),title:((h=s==null?void 0:s.metadata)==null?void 0:h.title)||"",date:((g=s==null?void 0:s.metadata)==null?void 0:g.date)||"",summaryHtml:i,media:r}}).sort((e,s)=>{const c=P(e.date),i=P(s.date);return i.start!==c.start?i.start-c.start:c.ongoing!==i.ongoing?c.ongoing?-1:1:(i.end||0)-(c.end||0)||(e.title||"").localeCompare(s.title||"","en",{sensitivity:"base"})})}}const ye=Object.freeze(Object.defineProperty({__proto__:null,csr:oe,load:fe,prerender:ce},Symbol.toStringTag,{value:"Module"}));function F(l,t,n){const e=l.slice();return e[6]=t[n],e}function G(l,t,n){const e=l.slice();return e[9]=t[n],e}function ue(l){let t,n=O(l[6].media),e=[];for(let s=0;s<n.length;s+=1)e[s]=J(G(l,n,s));return{c(){t=E("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=D(s,"DIV",{class:!0});var c=z(t);for(let i=0;i<e.length;i+=1)e[i].l(c);c.forEach(v),this.h()},h(){m(t,"class","media svelte-mil7zh")},m(s,c){x(s,t,c);for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(t,null)},p(s,c){if(c&1){n=O(s[6].media);let i;for(i=0;i<n.length;i+=1){const r=G(s,n,i);e[i]?e[i].p(r,c):(e[i]=J(r),e[i].c(),e[i].m(t,null))}for(;i<e.length;i+=1)e[i].d(1);e.length=n.length}},d(s){s&&v(t),ie(e,s)}}}function J(l){let t,n;return{c(){t=E("img"),this.h()},l(e){t=D(e,"IMG",{src:!0,alt:!0,loading:!0,decoding:!0,fetchpriority:!0,class:!0}),this.h()},h(){le(t.src,n=l[9])||m(t,"src",n),m(t,"alt",""),m(t,"loading","lazy"),m(t,"decoding","async"),m(t,"fetchpriority","low"),m(t,"class","svelte-mil7zh")},m(e,s){x(e,t,s)},p:T,d(e){e&&v(t)}}}function K(l,t){var V;let n,e,s,c=t[1](t[6].date)+"",i,r,o,a,h=t[6].title+"",g,f,p,u,j,S,H=t[6].summaryHtml+"",M,b=((V=t[6].media)==null?void 0:V.length)>0&&ue(t);return{key:l,first:null,c(){n=E("div"),e=E("div"),s=E("time"),i=B(c),r=$(),o=E("div"),a=E("a"),g=B(h),f=$(),b&&b.c(),p=$(),u=E("div"),j=E("div"),S=new ne(!1),M=$(),this.h()},l(k){n=D(k,"DIV",{class:!0});var _=z(n);e=D(_,"DIV",{class:!0});var d=z(e);s=D(d,"TIME",{class:!0});var y=z(s);i=q(y,c),y.forEach(v),r=C(d),o=D(d,"DIV",{class:!0});var w=z(o);a=D(w,"A",{href:!0});var A=z(a);g=q(A,h),A.forEach(v),w.forEach(v),d.forEach(v),f=C(_),b&&b.l(_),p=C(_),u=D(_,"DIV",{class:!0});var L=z(u);j=D(L,"DIV",{class:!0});var N=z(j);S=se(N,!1),N.forEach(v),L.forEach(v),M=C(_),_.forEach(v),this.h()},h(){m(s,"class","col time svelte-mil7zh"),m(a,"href",`/projects/${t[6].slug}`),m(o,"class","col project svelte-mil7zh"),m(e,"class","row svelte-mil7zh"),S.a=null,m(j,"class","content"),m(u,"class","info svelte-mil7zh"),m(n,"class","svelte-mil7zh"),this.first=n},m(k,_){x(k,n,_),I(n,e),I(e,s),I(s,i),I(e,r),I(e,o),I(o,a),I(a,g),I(n,f),b&&b.m(n,null),I(n,p),I(n,u),I(u,j),S.m(H,j),I(n,M)},p(k,_){var d;t=k,((d=t[6].media)==null?void 0:d.length)>0&&b.p(t,_)},d(k){k&&v(n),b&&b.d()}}}function ge(l){let t,n,e=[],s=new Map,c=O(l[0]);const i=r=>r[6].slug;for(let r=0;r<c.length;r+=1){let o=F(l,c,r),a=i(o);s.set(a,e[r]=K(a,o))}return{c(){t=E("main"),n=E("div");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=D(r,"MAIN",{class:!0});var o=z(t);n=D(o,"DIV",{class:!0});var a=z(n);for(let h=0;h<e.length;h+=1)e[h].l(a);a.forEach(v),o.forEach(v),this.h()},h(){m(n,"class","rows svelte-mil7zh"),m(t,"class","archive svelte-mil7zh")},m(r,o){x(r,t,o),I(t,n);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(n,null)},p(r,[o]){o&3&&(c=O(r[0]),e=re(e,o,i,1,r,c,s,n,ae,K,null,F))},i:T,o:T,d(r){r&&v(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function me(l,t,n){let{data:e}=t;const s=e.projects||[],c=a=>String(a||"").trim().toLowerCase().replace(/[–—−]/g,"-");function i(a=""){var u;const h=c(a).match(/^(\d{4})(?:\s*-\s*(\d{4}|ongoing))?$/i);if(!h)return{start:-1/0,end:-1/0,ongoing:!1};const g=+h[1],f=((u=h[2])==null?void 0:u.includes("ongoing"))||!1,p=/^\d{4}$/.test(h[2])?+h[2]:f?1/0:g;return{start:g,end:p,ongoing:f}}const r=[...s].sort((a,h)=>{const g=i(a.date),f=i(h.date);return f.start!==g.start?f.start-g.start:g.ongoing!==f.ongoing?g.ongoing?-1:1:(f.end||0)-(g.end||0)||(a.title||"").localeCompare(h.title||"","en",{sensitivity:"base"})}),o=a=>{if(!a)return"—";if(/^\d{4}(-\d{4})?$/.test(a))return a;const h=new Date(a);return isNaN(h)?a:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(h)};return l.$$set=a=>{"data"in a&&n(2,e=a.data)},[r,o,e]}class we extends Z{constructor(t){super(),ee(this,t,me,ge,te,{data:2})}}export{we as component,ye as universal};
