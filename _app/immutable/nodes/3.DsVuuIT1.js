import{_ as U,a as Q,b as R,c as W}from"../chunks/C5uINEos.js";import{I as X,u as Y,S as Z,i as ee,s as te,n as N,d as g,b as $,c as y,o as u,e as x,f as j,j as I,g as L,h as O,p as se,t as P,k as C,H as ne,J as ae,K as le}from"../chunks/D0BTlVWg.js";import"../chunks/IHki7fMi.js";function T(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ie(l,t){l.d(1),t.delete(l.key)}function re(l,t,a,e,n,r,s,i,o,d,m,S){let _=l.length,w=r.length,f=_;const k={};for(;f--;)k[l[f].key]=f;const D=[],V=new Map,M=new Map,b=[];for(f=w;f--;){const c=S(n,r,f),p=a(c);let v=s.get(p);v?b.push(()=>v.p(c,t)):(v=d(p,c),v.c()),V.set(p,D[f]=v),p in k&&M.set(p,Math.abs(f-k[p]))}const A=new Set,E=new Set;function h(c){Y(c,1),c.m(i,m),s.set(c.key,c),m=c.first,w--}for(;_&&w;){const c=D[w-1],p=l[_-1],v=c.key,H=p.key;c===p?(m=c.first,_--,w--):V.has(H)?!s.has(v)||A.has(v)?h(c):E.has(H)?_--:M.get(v)>M.get(H)?(E.add(v),h(c)):(A.add(H),_--):(o(p,s),_--)}for(;_--;){const c=l[_];V.has(c.key)||o(c,s)}for(;w;)h(D[w-1]);return X(b),D}const ce=!0,oe=!1,de=l=>String(l||"").trim().toLowerCase().replace(/[–—−]/g,"-"),B=l=>{const t=de(l).match(/^(\d{4})(?:\s*-\s*(\d{4}|ongoing))?$/i);if(!t)return{start:-1/0,end:-1/0,ongoing:!1};const a=+t[1],e=!!(t[2]&&String(t[2]).includes("ongoing")),n=/^\d{4}$/.test(t[2])?+t[2]:e?1/0:a;return{start:a,end:n,ongoing:e}},ue=l=>{const t=l.toLowerCase().indexOf("<hr"),a=t>=0?l.slice(0,t):l,e=[...a.matchAll(/<img[^>]*src=["']([^"']+)["'][^>]*>/gi)].map(r=>r[1]);return{summaryHtml:a.replace(/<img[^>]*>/gi,""),media:e}};async function fe(){return{projects:Object.entries(Object.assign({"/src/routes/texts/cua.md":W,"/src/routes/texts/design-signals.md":R,"/src/routes/texts/unfolding-the-archive.md":Q,"/src/routes/texts/vantage.md":U})).map(([e,n])=>{var d,m,S;const r=typeof((d=n==null?void 0:n.default)==null?void 0:d.render)=="function"?n.default.render():{html:""},{summaryHtml:s,media:i}=ue(r.html||"");return{slug:e.split("/texts/")[1].replace(".md",""),title:((m=n==null?void 0:n.metadata)==null?void 0:m.title)||"",date:((S=n==null?void 0:n.metadata)==null?void 0:S.date)||"",summaryHtml:s,media:i}}).sort((e,n)=>{const r=B(e.date),s=B(n.date);return r.ongoing&&!s.ongoing?-1:s.ongoing&&!r.ongoing?1:s.start!==r.start?s.start-r.start:s.end!==r.end?s.end-r.end:(e.title||"").localeCompare(n.title||"","en",{sensitivity:"base"})})}}const ye=Object.freeze(Object.defineProperty({__proto__:null,csr:oe,load:fe,prerender:ce},Symbol.toStringTag,{value:"Module"}));function F(l,t,a){const e=l.slice();return e[3]=t[a],e}function G(l,t,a){const e=l.slice();return e[6]=t[a],e}function he(l){let t,a=T(l[3].media),e=[];for(let n=0;n<a.length;n+=1)e[n]=J(G(l,a,n));return{c(){t=I("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=x(n,"DIV",{class:!0});var r=j(t);for(let s=0;s<e.length;s+=1)e[s].l(r);r.forEach(g),this.h()},h(){u(t,"class","flex overflow-x-auto snap-x snap-mandatory gap-1 py-1")},m(n,r){$(n,t,r);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null)},p(n,r){if(r&1){a=T(n[3].media);let s;for(s=0;s<a.length;s+=1){const i=G(n,a,s);e[s]?e[s].p(i,r):(e[s]=J(i),e[s].c(),e[s].m(t,null))}for(;s<e.length;s+=1)e[s].d(1);e.length=a.length}},d(n){n&&g(t),ae(e,n)}}}function J(l){let t,a;return{c(){t=I("img"),this.h()},l(e){t=x(e,"IMG",{src:!0,alt:!0,loading:!0,decoding:!0,fetchpriority:!0,class:!0}),this.h()},h(){le(t.src,a=l[6])||u(t,"src",a),u(t,"alt",""),u(t,"loading","lazy"),u(t,"decoding","async"),u(t,"fetchpriority","low"),u(t,"class","h-60 object-cover rounded")},m(e,n){$(e,t,n)},p:N,d(e){e&&g(t)}}}function K(l,t){var A;let a,e,n,r=t[1](t[3].date)+"",s,i,o,d,m=t[3].title+"",S,_,w,f,k,D,V=t[3].summaryHtml+"",M,b=((A=t[3].media)==null?void 0:A.length)>0&&he(t);return{key:l,first:null,c(){a=I("div"),e=I("div"),n=I("time"),s=P(r),i=C(),o=I("div"),d=I("a"),S=P(m),_=C(),b&&b.c(),w=C(),f=I("div"),k=I("div"),D=new ne(!1),M=C(),this.h()},l(E){a=x(E,"DIV",{class:!0});var h=j(a);e=x(h,"DIV",{class:!0});var c=j(e);n=x(c,"TIME",{class:!0});var p=j(n);s=L(p,r),p.forEach(g),i=O(c),o=x(c,"DIV",{class:!0});var v=j(o);d=x(v,"A",{href:!0,class:!0});var H=j(d);S=L(H,m),H.forEach(g),v.forEach(g),c.forEach(g),_=O(h),b&&b.l(h),w=O(h),f=x(h,"DIV",{class:!0});var q=j(f);k=x(q,"DIV",{class:!0});var z=j(k);D=se(z,!1),z.forEach(g),q.forEach(g),M=O(h),h.forEach(g),this.h()},h(){u(n,"class","text-gray-500 text-sm [font-variant-numeric:tabular-nums]"),u(d,"href",`/projects/${t[3].slug}`),u(d,"class","break-words hover:underline"),u(o,"class","text-black overflow-hidden"),u(e,"class","grid grid-cols-[auto,1fr] gap-1 text-left pb-5"),D.a=null,u(k,"class","content"),u(f,"class","w-full max-w-[840px] py-2 pb-5 text-base leading-[1.2rem]"),u(a,"class","border-b border-gray-200 mb-2"),this.first=a},m(E,h){$(E,a,h),y(a,e),y(e,n),y(n,s),y(e,i),y(e,o),y(o,d),y(d,S),y(a,_),b&&b.m(a,null),y(a,w),y(a,f),y(f,k),D.m(V,k),y(a,M)},p(E,h){var c;t=E,((c=t[3].media)==null?void 0:c.length)>0&&b.p(t,h)},d(E){E&&g(a),b&&b.d()}}}function ge(l){let t,a,e=[],n=new Map,r=T(l[0]);const s=i=>i[3].slug;for(let i=0;i<r.length;i+=1){let o=F(l,r,i),d=s(o);n.set(d,e[i]=K(d,o))}return{c(){t=I("main"),a=I("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=x(i,"MAIN",{class:!0});var o=j(t);a=x(o,"DIV",{class:!0});var d=j(a);for(let m=0;m<e.length;m+=1)e[m].l(d);d.forEach(g),o.forEach(g),this.h()},h(){u(a,"class","space-y-2"),u(t,"class","mx-auto max-w-screen-2xl px-2 text-black text-[1.4rem] leading-[1.4rem]")},m(i,o){$(i,t,o),y(t,a);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(a,null)},p(i,[o]){o&3&&(r=T(i[0]),e=re(e,o,s,1,i,r,n,a,ie,K,null,F))},i:N,o:N,d(i){i&&g(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function me(l,t,a){let{data:e}=t;const n=e.projects||[],r=s=>{if(!s)return"—";if(/^\d{4}(-\d{4})?$/.test(s))return s;const i=new Date(s);return isNaN(i)?s:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(i)};return l.$$set=s=>{"data"in s&&a(2,e=s.data)},[n,r,e]}class be extends Z{constructor(t){super(),ee(this,t,me,ge,te,{data:2})}}export{be as component,ye as universal};
